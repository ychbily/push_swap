CC = cc
CFLAGS = -Wall -Wextra -Werror -fsanitize=undefined

SRCS = main.c ./src/free_error.c ./src/ft_atoi.c ./src/ft_split.c ./src/ft_strjoin.c ./src/push_op.c \
		./src/push_swap_algo_utils.c ./src/push_swap_algo_utils_2.c ./src/push_swap_algo.c \
		./src/reverse_rotate_op.c ./src/rotate_op.c ./src/stack_init.c ./src/swap_op.c ./src/tiny_sort.c \
		./src/utils.c ./src/utils_2.c ./src/push_swap_algo_utils_3.c ./src/handle_args.c ./src/median.c
		
BSRC = checker_bonus.c ./src/checker_utils_bonus.c ./src/ft_split.c ./src/stack_init.c ./src/free_error.c ./src/ft_atoi.c ./src/ft_strjoin.c \
	./get_next_line/get_next_line.c ./get_next_line/get_next_line_utils.c \
	./src/utils.c ./src/utils_2.c ./src/reverse_rotate_op.c ./src/rotate_op.c ./src/push_op.c ./src/swap_op.c \
	./src/handle_args.c 
		
OBJS = $(SRCS:.c=.o)
BOBJ = $(BSRC:.c=.o)
NAME = push_swap
BNAME = checker_bonus
COMPILATION_STARTED := .compilation_started
HEADERS = includes/push_swap.h includes/get_next_line.h includes/checker_bonus.h

all: $(NAME)
	@rm -f $(COMPILATION_STARTED)
	@echo "\n(ê©œ á¯… ê©œ;)â­ â­â­ ğŸ“¦ All Done. ğŸ“¦  (ê©œ á¯… ê©œ;)â­ â­\nâ­"

$(NAME): $(OBJS)
	@echo "\n\nâ‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†â‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†"
	@echo "âºï½¡Ëš        Linking $@...        ï½¡âºâ‹†"
	@$(CC) $(CFLAGS) $(OBJS) -o $(NAME)
	@echo "âºï½¡Ëš   Linking of $@ complete.   ï½¡âºâ‹†"
	@echo "âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†â‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†"

$(BNAME): $(BOBJ)
	@echo "\n\nâ‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†â‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†"
	@echo "âºï½¡Ëš        Linking $@...        ï½¡âºâ‹†"
	@$(CC) $(CFLAGS) $(BOBJ) -o $(BNAME)
	@echo "âºï½¡Ëš   Linking of $@ complete.   ï½¡âºâ‹†"
	@echo "âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†â‹†âºï½¡Ëšâ‹†Ë™â€§â‚Šâ˜½ â—¯ â˜¾â‚Šâ€§Ë™â‹†Ëšï½¡âºâ‹†"

%.o: %.c $(HEADERS)
	@if [ ! -f $(COMPILATION_STARTED) ]; then \
		echo "\nCompilation starting: "; \
		touch $(COMPILATION_STARTED); \
	fi
	@$(CC) $(CFLAGS) -c $< -o $@ && printf "âŒ›"

clean:
	@echo "Cleaning object files ..."
	@rm -f $(OBJS) $(BOBJ) $(COMPILATION_STARTED)
	@echo "â–„ï¸»ãƒ‡â•â•â”ä¸€ğŸ’¥ Clean complete. ğŸ’¥ä¸€â”â•â•ãƒ‡ï¸»â–„"

fclean: clean
	@echo "\nâŠ¹ à£ª ï¹ğ“Šï¹ğ“‚ï¹âŠ¹ à£ª Ë–âŠ¹ à£ª ï¹ğ“Šï¹ğ“‚ï¹âŠ¹ à£ª Ë–âŠ¹ à£ª ï¹ğ“Šï¹ğ“‚ï¹âŠ¹ à£ª Ë–"
	@echo "\nRemoving binaries..."
	@rm -rf $(NAME) $(BNAME)
	@echo "â–„ï¸»ãƒ‡â•â•â”ä¸€ğŸ’¥ Full clean complete. ğŸ’¥ä¸€â”â•â•ãƒ‡ï¸»â–„"

re: fclean all

bonus: $(BNAME)
	@rm -rf $(COMPILATION_STARTED)x				
	@echo "\n(ê©œ á¯… ê©œ;)â­ â­â­ ğŸ“¦ All Done. ğŸ“¦  (ê©œ á¯… ê©œ;)â­ â­â­\n"

.PHONY: clean
